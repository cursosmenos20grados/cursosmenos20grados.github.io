<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>(-20¬∫T.E) Curso de Refrigeraci√≥n -20 grados Rafael Calzada </title>
    <style>
        /* Estilos Generales */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; background-color: #f0f4f8; color: #333; }
        header { background: linear-gradient(135deg, #003366, #007bff); color: white; padding: 40px 20px; text-align: center; }
        .container { max-width: 900px; margin: 20px auto; padding: 20px; padding-bottom: 100px; }
        .main-img { width: 100%; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 30px; }
        .card { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border-left: 5px solid #007bff; }
        .aval { text-align: center; background: #e9ecef; padding: 20px; border-radius: 10px; margin-top: 20px; }
        .highlight { color: #0056b3; font-weight: bold; }
        .btn-ws { display: inline-block; background: #28a745; color: white; padding: 15px 25px; text-decoration: none; border-radius: 5px; font-weight: bold; margin-top: 20px; transition: 0.3s; }
        .btn-ws:hover { background: #218838; transform: scale(1.05); }

        /* --- CHAT MODERNO Y FLOTANTE --- */
        #chat-launcher {
            position: fixed;
            bottom: 25px;
            right: 25px;
            width: 65px;
            height: 65px;
            background: linear-gradient(135deg, #003366, #007bff);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 30px;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0,0,0,0.4);
            z-index: 1001;
            transition: all 0.3s ease;
        }
        #chat-launcher:hover { transform: scale(1.1) rotate(10deg); }

        #chat-window {
            position: fixed;
            bottom: 100px;
            right: 25px;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.3);
            display: none; /* Empieza oculto */
            flex-direction: column;
            z-index: 1000;
            overflow: hidden;
            border: 1px solid rgba(0,51,102,0.1);
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        #chat-header {
            background: #003366;
            color: white;
            padding: 18px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            font-size: 16px;
        }

        .close-chat { cursor: pointer; font-size: 24px; line-height: 1; }

        #chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background: #fdfdfd;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .msg { padding: 12px 16px; border-radius: 18px; font-size: 14.5px; max-width: 85%; line-height: 1.5; word-wrap: break-word; }
        .msg-user { align-self: flex-end; background: #007bff; color: white; border-bottom-right-radius: 4px; box-shadow: 0 2px 5px rgba(0,123,255,0.2); }
        .msg-ia { align-self: flex-start; background: #f0f0f0; color: #333; border-bottom-left-radius: 4px; }

        .chat-input-area { padding: 15px; border-top: 1px solid #eee; display: flex; gap: 10px; background: white; }
        #chat-input { flex: 1; border: 1px solid #ddd; padding: 12px; border-radius: 10px; outline: none; font-size: 14px; }
        #chat-input:focus { border-color: #007bff; }
        #chat-send { background: #003366; color: white; border: none; padding: 10px 18px; border-radius: 10px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

<header>
    <h1>(-20¬∫T.E) Curso de Refrigeraci√≥n</h1>
    <p>Especialista en Heladeras y Aires Acondicionados</p>
</header>

<div class="container">
    <img src="https://circulocatolicorafaelcalzada.wordpress.com/wp-content/uploads/2024/03/refrigeracion_2024caim_insta.jpg?w=1024" alt="Curso de Refrigeraci√≥n" class="main-img">

    <div class="info-grid">
        <div class="card">
            <h3>üìÖ Detalles del Curso</h3>
            <p><span class="highlight">Duraci√≥n:</span> 4 Meses</p>
            <p><span class="highlight">Carga Horaria:</span> 6 horas semanales</p>
            <p><span class="highlight">Incluye:</span> Certificado Oficial y Matr√≠cula</p>
        </div>
        <div class="card">
            <h3>üìç Ubicaci√≥n</h3>
            <p><strong>C√≠rculo Cat√≥lico de Rafael Calzada</strong></p>
            <p>Entre R√≠os 1555, Rafael Calzada,<br>Buenos Aires, Argentina</p>
        </div>
    </div>

    <div class="aval">
        <p>Curso avalado por la <br><strong>CAMARA ARGENTINA DE INSTALADORES MATRICULADOS (C.A.I.M)</strong></p>
    </div>

    <div style="text-align: center; margin-top: 40px;">
        <a href="https://wa.me/5491100000000" class="btn-ws">Solicitar Informaci√≥n por WhatsApp</a>
    </div>
</div>

<div id="chat-launcher" onclick="toggleChat()">üí¨</div>

<div id="chat-window">
    <div id="chat-header">
        <span>‚ùÑÔ∏è Asistente "IA" Menos 20 Grados</span>
        <span class="close-chat" onclick="toggleChat()">√ó</span>
    </div>
    <div id="chat-messages">
        <div class="msg msg-ia">¬°Hola! Soy tu asistente "IA" incorporada!  Preguntame lo que quieras sobre el curso de refrigeraci√≥n.</div>
    </div>
    <div class="chat-input-area">
        <input type="text" id="chat-input" placeholder="Escribe tu mensaje..." onkeypress="if(event.key==='Enter') sendMessage()">
        <button id="chat-send" onclick="sendMessage()">‚û§</button>
    </div>
</div>

<script>
    // --- CONFIGURACI√ìN DE IA DEFINITIVA ---
    const apiKey = "AIzaSyBB1-0UIJNIw9-tGwHMUzsbW0bCLVyLgQU"; 
    const apiUrl = `https://generativelanguage.googleapis.com/v1/models/gemini-2.5-flash:generateContent?key=${apiKey}`;

    const contextIA = "Sos el asistente de 'Cursos Menos 20 Grados'. El curso es de Refrigeraci√≥n en el C√≠rculo Cat√≥lico de Rafael Calzada (Entre R√≠os 1555). Dura 4 meses, 6h semanales. Avalado por C.A.I.M. S√© amable, breve y responde en base a esta informaci√≥n.";

    // Abrir y cerrar ventana
    function toggleChat() {
        const chatWin = document.getElementById("chat-window");
        const isVisible = chatWin.style.display === "flex";
        chatWin.style.display = isVisible ? "none" : "flex";
        if(!isVisible) document.getElementById("chat-input").focus();
    }

    async function sendMessage() {
        const input = document.getElementById("chat-input");
        const container = document.getElementById("chat-messages");
        const msgText = input.value.trim();

        if (!msgText) return;

        // Mostrar mensaje usuario
        container.innerHTML += `<div class="msg msg-user">${msgText}</div>`;
        input.value = "";
        container.scrollTop = container.scrollHeight;

        // Mostrar indicador de carga
        const tempId = "loading-" + Date.now();
        container.innerHTML += `<div id="${tempId}" class="msg msg-ia">...</div>`;
        container.scrollTop = container.scrollHeight;

        try {
            const response = await fetch(apiUrl, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    contents: [{
                        role: "user",
                        parts: [{ text: contextIA + "\nUsuario pregunta: " + msgText }]
                    }]
                })
            });

            const data = await response.json();
            document.getElementById(tempId).remove();

            if (data.error) {
                container.innerHTML += `<div class="msg msg-ia">Aviso t√©cnico: ${data.error.message}</div>`;
            } else if (data.candidates && data.candidates[0].content) {
                const aiText = data.candidates[0].content.parts[0].text;
                container.innerHTML += `<div class="msg msg-ia">${aiText}</div>`;
            }
        } catch (e) {
            if(document.getElementById(tempId)) document.getElementById(tempId).remove();
            container.innerHTML += `<div class="msg msg-ia">Error de conexi√≥n. Intenta de nuevo.</div>`;
        }
        container.scrollTop = container.scrollHeight;
    }
</script>

</body>
</html>
